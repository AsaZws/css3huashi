<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>jq-banner</title>
	<link rel="stylesheet" type="text/css" href="css/index.css">
	<style>
	</style>
</head>
<body>
	
<div class="v_show">
	<div class="v_caption">
		<h2 class="cartoon" title="卡通动漫">卡通动漫</h2>
		<div class="highlight_tip">
			<span class="current">1</span>
			<span>2</span>
			<span>3</span>
			<span>4</span>
		</div>
		<div class="change_btn">
			<span class="prev">上一页</span>
			<span class="next">下一页</span>
		</div>
		<em><a href="#">更多>></a></em>
	</div>
	<div class="v_content">
		<div class="v_content_list">
			<ul>
				<li>
					<a href="#"><img src="images/01.jpg" alt="海贼王"></a>
					<h4><a href="#">海贼王</a></h4>
					<span>播放：<em>28.276</em></span>
				</li>
				<li>
					<a href="#"><img src="images/01.jpg" alt="火影忍者"></a>
					<h4><a href="#">火影忍者</a></h4>
					<span>播放：<em>28.276</em></span>
				</li>
				<li>
					<a href="#"><img src="images/01.jpg" alt="龙珠"></a>
					<h4><a href="#">龙珠</a></h4>
					<span>播放：<em>28.276</em></span>
				</li>
				<li>
					<a href="#"><img src="images/01.jpg" alt="网球王子"></a>
					<h4><a href="#">网球王子</a></h4>
					<span>播放：<em>28.276</em></span>
				</li>
				<li>
					<a href="#"><img src="images/01.jpg" alt="灌篮高手"></a>
					<h4><a href="#">灌篮高手</a></h4>
					<span>播放：<em>28.276</em></span>
				</li>
				<li>
					<a href="#"><img src="images/01.jpg" alt="柯南"></a>
					<h4><a href="#">柯南</a></h4>
					<span>播放：<em>28.276</em></span>
				</li>
				<li>
					<a href="#"><img src="images/01.jpg" alt="龙珠"></a>
					<h4><a href="#">龙珠</a></h4>
					<span>播放：<em>28.276</em></span>
				</li>
				<li>
					<a href="#"><img src="images/01.jpg" alt="网球王子"></a>
					<h4><a href="#">网球王子</a></h4>
					<span>播放：<em>28.276</em></span>
				</li>
				<li>
					<a href="#"><img src="images/01.jpg" alt="灌篮高手"></a>
					<h4><a href="#">灌篮高手</a></h4>
					<span>播放：<em>28.276</em></span>
				</li>
				<li>
					<a href="#"><img src="images/01.jpg" alt="柯南"></a>
					<h4><a href="#">柯南</a></h4>
					<span>播放：<em>28.276</em></span>
				</li>
				<li>
					<a href="#"><img src="images/01.jpg" alt="龙珠"></a>
					<h4><a href="#">龙珠</a></h4>
					<span>播放：<em>28.276</em></span>
				</li>
				<li>
					<a href="#"><img src="images/01.jpg" alt="网球王子"></a>
					<h4><a href="#">网球王子</a></h4>
					<span>播放：<em>28.276</em></span>
				</li>
				<li>
					<a href="#"><img src="images/01.jpg" alt="灌篮高手"></a>
					<h4><a href="#">灌篮高手</a></h4>
					<span>播放：<em>28.276</em></span>
				</li>
				<li>
					<a href="#"><img src="images/01.jpg" alt="柯南"></a>
					<h4><a href="#">柯南</a></h4>
					<span>播放：<em>28.276</em></span>
				</li>
				<li>
					<a href="#"><img src="images/01.jpg" alt="龙珠"></a>
					<h4><a href="#">龙珠</a></h4>
					<span>播放：<em>28.276</em></span>
				</li>
				<li>
					<a href="#"><img src="images/01.jpg" alt="网球王子"></a>
					<h4><a href="#">网球王子</a></h4>
					<span>播放：<em>28.276</em></span>
				</li>
			</ul>
		</div>
	</div>
</div>

<script src="js/jquery-1.7.1.min.js"></script>

<script>
$(function(){
	var page = 1;
	var i = 4;  // 每版放4个图片
	// var clone = $(".v_content_list li").first().clone();
	// 	$(".v_content_list").append(clone);

	$(".next").click(function(){  // 绑定click

		var $parent = $(this).parents(".v_show");  // 根据当前点击的元素获取到父元素
		var $v_show = $parent.find(".v_content_list");  // 找到“视频内容展示区”
		var $v_content = $parent.find(".v_content");  // 找到视频区域外围的div

		var v_width = $v_content.width();
		var len = $v_show.find("li").length;  // 总的视频图片数
		var page_count = Math.ceil(len/i);  // 只要不是整数，就往大的方向取最小的整数
		// alert($parent.html());
		if(!$v_show.is(":animated")){  // 判断视频展示内容是否处于动画
			if( page == page_count ){  // 已经到最后一个版面了，如果再向后，必须跳转到第一个版面
				
				$v_show.animate({ left: '0px' }, "slow");  // 通过改变left值，跳转到第一个版面
				page = 1;
			}else{
				$v_show.animate({ left: '-=' + v_width }, "slow");  // 改变left值，达到每次换一个版面
				page++;
			}
			$parent.find("span").eq((page-1)).addClass("current").siblings().removeClass("current");
			// 给指定的span元素添加current样式，然后去掉span元素的同辈元素上的current样式
		}
	});
	$(".prev").click(function(){
		var $parent = $(this).parents(".v_show");  // 根据当前点击的元素获取到父元素
		var $v_show = $parent.find(".v_content_list");  // 找到“视频内容展示区”
		var $v_content = $parent.find(".v_content");  // 找到视频区域外围的div

		var v_width = $v_content.width();
		var len = $v_show.find("li").length;  // 总的视频图片数
		var page_count = Math.ceil(len/i);  // 只要不是整数，就往大的方向取最小的整数
		if(!$v_show.is(":animated")){
			if(page == 1){
				$v_show.animate({left: '-=' + v_width*(page_count-1)}, "slow");
				page = page_count;
			}else{
				$v_show.animate({left: '+=' + v_width}, "slow");
				page--;
			}
			$parent.find("span").eq((page-1)).addClass("current").siblings().removeClass("current");
		}
	})

});

</script>

</body>
</html>